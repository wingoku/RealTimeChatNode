<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
  <title><%= title %></title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body>
<h1><%= title %></h1>
<p>Welcome to <%= title %></p>

<div id="chatWinodw"> </div>


<script type = "text/javascript"
        src = "http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<!-- <script src = "http://localhost:3000/socket.io/socket.io.js"></script> -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.4/socket.io.min.js"></script>

<script>
//  var socket = io.connect('http://localhost:3000', {reconnect: true});
</script>
<script type = "text/javascript" language = "javascript">
//  var socket = io();
//var socket = io.connect('http://localhost:3000', {reconnect: true});
var socket = io('http://localhost:3000');

socket.on('connect',function(){
  console.log("connect");
});
  $(document).ready(function() {
    var $chatSendButton = $('#chatButton');
    var $chatBox        = $('#chatBox');
    var $chatWindow     = $('#chatWindow');


    $("#chatButton").bind('click', function() {
      event.preventDefault();
      var userMessage = $chatBox.val();

      alert("button clicked");

      sendMessageToServer(userMessage);
    });

    $chatSendButton.click(function() {

    });
//
//    socket.on('recievedMessage', function(data) {
//      $chatWindow.append("<br />"+ data);
//    });

    function sendMessageToServer(userMessage){
      alert("send Message");
      socket.emit('sendMessage', userMessage);
    }
  });


</script>

<form action="post" id="chatForm">
  <input type="text" id="chatBox" />
  <button type="button" value = "submit" id="chatButton"> Send </button>
</form>

</body>
</html>
